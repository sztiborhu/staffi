<div class="profile-page">
  <!-- Page Header -->
  <div class="page-header">
    <h1 class="page-title">
      <mat-icon class="title-icon">person</mat-icon>
      Profil
    </h1>
    <p class="page-subtitle">Személyes beállítások és jelszó módosítása</p>
  </div>

  <!-- User Information Card -->
  <mat-card class="info-card">
    <mat-card-content>
      <div class="user-info">
        <div class="user-avatar">
          <mat-icon>account_circle</mat-icon>
        </div>
        <div class="user-details">
          <h2>{{ userData?.lastName }} {{ userData?.firstName }}</h2>
          <p class="user-email">{{ userData?.email }}</p>
          <span class="user-role" [class.role-admin]="userData?.role === 'ADMIN'">
            {{ userData?.role }}
          </span>
        </div>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Change Password Card -->
  <mat-card class="password-card">
    <mat-card-content>
      <h3 class="card-title">
        <mat-icon>lock</mat-icon>
        Jelszó módosítása
      </h3>

      <form [formGroup]="passwordForm" (ngSubmit)="changePassword()" class="password-form">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Jelenlegi jelszó</mat-label>
          <input
            matInput
            [type]="hideOldPassword ? 'password' : 'text'"
            formControlName="oldPassword"
            required>
          <mat-icon matIconPrefix>lock_outline</mat-icon>
          <button
            mat-icon-button
            matIconSuffix
            type="button"
            (click)="hideOldPassword = !hideOldPassword">
            <mat-icon>{{ hideOldPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button>
          <mat-error *ngIf="passwordForm.get('oldPassword')?.hasError('required')">
            Kötelező mező
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Új jelszó</mat-label>
          <input
            matInput
            [type]="hideNewPassword ? 'password' : 'text'"
            formControlName="newPassword"
            required>
          <mat-icon matIconPrefix>lock</mat-icon>
          <button
            mat-icon-button
            matIconSuffix
            type="button"
            (click)="hideNewPassword = !hideNewPassword">
            <mat-icon>{{ hideNewPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button>
          <mat-error *ngIf="passwordForm.get('newPassword')?.hasError('required')">
            Kötelező mező
          </mat-error>
          <mat-error *ngIf="passwordForm.get('newPassword')?.hasError('minlength')">
            Minimum 8 karakter szükséges
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Új jelszó megerősítése</mat-label>
          <input
            matInput
            [type]="hideConfirmPassword ? 'password' : 'text'"
            formControlName="confirmPassword"
            required>
          <mat-icon matIconPrefix>lock</mat-icon>
          <button
            mat-icon-button
            matIconSuffix
            type="button"
            (click)="hideConfirmPassword = !hideConfirmPassword">
            <mat-icon>{{ hideConfirmPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button>
          <mat-error *ngIf="passwordForm.get('confirmPassword')?.hasError('required')">
            Kötelező mező
          </mat-error>
          <mat-error *ngIf="passwordForm.get('confirmPassword')?.hasError('passwordMismatch')">
            A jelszavak nem egyeznek
          </mat-error>
        </mat-form-field>

        <div class="form-actions">
          <button
            mat-flat-button
            color="primary"
            type="submit"
            class="submit-button"
            [disabled]="loading || passwordForm.invalid">
            <mat-spinner *ngIf="loading" diameter="20" class="button-spinner"></mat-spinner>
            <mat-icon *ngIf="!loading">save</mat-icon>
            <span *ngIf="!loading">Jelszó megváltoztatása</span>
            <span *ngIf="loading">Mentés...</span>
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>

  <!-- Security Tips Card -->
  <mat-card class="tips-card">
    <mat-card-content>
      <h3 class="card-title">
        <mat-icon>security</mat-icon>
        Biztonsági tippek
      </h3>
      <ul class="tips-list">
        <li>
          <mat-icon>check_circle</mat-icon>
          <span>Használjon legalább 8 karaktert</span>
        </li>
        <li>
          <mat-icon>check_circle</mat-icon>
          <span>Használjon kisbetűket, nagybetűket és számokat</span>
        </li>
        <li>
          <mat-icon>check_circle</mat-icon>
          <span>Használjon speciális karaktereket (!&#64;#$%^&*)</span>
        </li>
        <li>
          <mat-icon>check_circle</mat-icon>
          <span>Ne használjon könnyen kitalálható jelszavakat</span>
        </li>
        <li>
          <mat-icon>check_circle</mat-icon>
          <span>Változtassa meg a jelszavát rendszeresen</span>
        </li>
      </ul>
    </mat-card-content>
  </mat-card>
</div>

